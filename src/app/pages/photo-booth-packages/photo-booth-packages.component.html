<!-- photo-booth-packages.component.html -->
<section class="py-5">
  <div class="container">
    <h1 class="text-center mb-5">Photo Booth Packages</h1>



    <div class="row row-cols-1 row-cols-md-3 g-4">
      <div class="col" *ngFor="let pkg of packages">
        <div class="card h-100 package-card" [class.border-primary]="selectedPackage?.idPB === pkg.idPB">
          <div class="card-header bg-primary text-white">
            <h3 class="mb-0">{{ pkg.titlePB }}</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title pricing-card-title">${{ pkg.base_pricePB }}</h4>
            <p class="text-muted">{{ pkg.details1PB }}</p>

            <div *ngIf="pkg.imageSamplePB" class="mb-3">
              <img [src]="pkg.imageSamplePB" alt="Sample" class="img-fluid rounded">
            </div>

            <ul class="list-unstyled mt-3 mb-4">
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.layoutPB | titlecase }}
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.printsPB | titlecase }}
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.propsPB | titlecase }} Props
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.backdropPB | titlecase }} Backdrop
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.usbPB | titlecase }} Included
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.hostingPB | titlecase }} Included
              </li>
              <li *ngIf="pkg.instantDigitalPB !== 'None'">
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.instantDigitalPB | uppercase }}
              </li>
              <li *ngIf="pkg.guestBookPB !== 'None'">
                <i class="fas fa-check-circle text-success me-2"></i>{{ pkg.guestBookPB | titlecase }}
              </li>
              <li>
                <i class="fas fa-check-circle text-success me-2"></i>Unlimited Sessions
              </li>
            </ul>

            <!-- <div *ngIf="pkg.addOnsPB?.length" class="mb-3">
                <h5>Popular Add-ons:</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between align-items-center" 
                      *ngFor="let addOn of pkg.addOns | slice:4:7">
                    {{ addOn.description }}
                    <span class="badge bg-primary rounded-pill">+${{ addOn.price }}</span>
                  </li>
                </ul>
              </div> -->
            <p class="text-muted"><small>{{pkg.descPB}}</small></p>
            <p class="text-muted" *ngIf="pkg.recommended_forPB">
              <small>Recommended for: {{ pkg.recommended_forPB }}</small>
            </p>


          </div>
          <div class="card-footer bg-transparent">
            <button class="btn btn-outline-primary w-100" (click)="selectPackage(pkg)">
              Select Package
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Selected Package Details -->
    <div class="mt-5" *ngIf="selectedPackage">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h2 class="mb-0">Customize: {{ selectedPackage.titlePB }}</h2>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <h3>Package Details</h3>
              <p><strong>Duration:</strong> {{ selectedPackage.hoursPB }}</p>
              <p><strong>Base Price:</strong> ${{ selectedPackage.base_pricePB }}</p>

              <h4 class="mt-4">Features</h4>
              <ul class="list-unstyled ms-3">
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.layoutPB | titlecase  }}
                </li>
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.printsPB | titlecase  }}
                </li>
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.propsPB | titlecase  }}
                </li>
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.backdropPB | titlecase  }}
                </li>
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.usbPB  | titlecase }}
                </li>
                <li class="">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.hostingPB  | titlecase }}
                </li>
                <li class=""  *ngIf="selectedPackage.instantDigitalPB !== 'None'">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{ selectedPackage.instantDigitalPB }}
                </li>
                <li class="" *ngIf="selectedPackage.guestBookPB != 'None'">
                  <i class="fas fa-check-circle text-primary me-2"></i>{{
                  selectedPackage.guestBookPB }}
                </li>
              </ul>
              
            </div>

              <div class="mt-3 col-md-3">
                <h5>Sample:</h5>
                <img
                  [src]="selectedPackage.imageSamplePB ? 'assets/images/' + selectedPackage.imageSamplePB : 'assets/images/pb2025.jpg'"
                  alt="Sample" class="img-fluid rounded">
                    <div class="mt-2">
                    <a class="nav-link" routerLink="/gallery" routerLinkActive="active">More Pics in Gallery</a>.
                    </div>
              </div>

            <div class="col-md-5">
              <h3>Customize Your Package</h3>
              <div class="mb-3" *ngIf="addOns">
                <h5>Available Add-ons</h5>
                <div class="form-check" *ngFor="let addOn of addOns; let i = index">
                  <input class="form-check-input" type="checkbox" [id]="'addon-' + i" [name]="'addon-' + i">
                  <label class="form-check-label" [for]="'addon-' + i">
                    {{ addOn.description }} (+${{ addOn.price }})
                  </label>
                </div>
              </div>



              <div class="d-grid gap-2 mt-4">
                <app-booking-form *ngIf="showBookingForm && selectedPackage" [package]="selectedPackage"
                  (bookingSubmitted)="onBookingSubmit($event)" (cancel)="showBookingForm = false">
                </app-booking-form>

                <button *ngIf="!showBookingForm" class="btn btn-success btn-lg" (click)="startBooking()">
                  <i class="fas fa-calendar-check me-2"></i> Book This Package
                </button>

                <button class="btn btn-outline-secondary" (click)="selectedPackage = null">
                  Back to Packages
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="alert alert-info mb-4 mt-4">
      <p class="mb-1"><strong>All packages include:</strong></p>
      <ul class="mb-0">
        <li>Unlimited sessions</li>
        <li>Standard props</li>
        <li>Printed copy plus digital copies online</li>
        <li>Choice of Silver, Gold or White backdrop</li>
      </ul>
    </div>

  </div>
</section>