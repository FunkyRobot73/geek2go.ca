<div class="music-request-container">
  <h2>Music Request Form</h2>
  
  <form [formGroup]="musicForm" (ngSubmit)="onSubmit()">
    <!-- Customer Selection -->
    <div class="form-group">
      <label for="customerId">Customer</label>
      <select id="customerId" formControlName="customerId" 
              (change)="onCustomerSelect($event)" class="form-control" required>
        <option [ngValue]="null">Select Customer</option>
        <option *ngFor="let customer of customers" [ngValue]="customer.id">
          {{ customer.fName }} {{ customer.lName }} - {{ customer.event }} ({{ customer.dateEvent }})
        </option>
      </select>
    </div>

    <!-- Introduction Songs (1-10) -->
    <div class="phase-section">
      <h3>Introduction Music</h3>
      <p class="counter">Songs: {{ introductionSongs.length }}/10</p>
      
      <div formArrayName="introductionSongs" *ngFor="let song of introductionSongs.controls; let i = index">
        <div [formGroupName]="i" class="song-entry">
          <div class="form-group">
            <label>Artist</label>
            <input type="text" formControlName="artist" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Title</label>
            <input type="text" formControlName="title" class="form-control" required>
          </div>
          <div class="form-group">
            <label>YouTube URL</label>
            <input type="url" formControlName="youtubeUrl" class="form-control">
          </div>
          <div class="form-group">
            <label>Notes</label>
            <input type="text" formControlName="notes" class="form-control">
          </div>
          <button type="button" class="btn btn-danger" (click)="removeSong('introduction', i)">Remove</button>
        </div>
      </div>
      
      <button type="button" class="btn btn-secondary" (click)="addSong('introduction', 10)" [disabled]="introductionSongs.length >= 10">
        Add Introduction Song
      </button>
    </div>

    <!-- Cocktail Songs (up to 50) -->
    <div class="phase-section">
      <h3>Cocktail Hour Music</h3>
      <p class="counter">Songs: {{ cocktailSongs.length }}/50</p>
      
      <div formArrayName="cocktailSongs" *ngFor="let song of cocktailSongs.controls; let i = index">
        <div [formGroupName]="i" class="song-entry">
          <!-- Same fields as introduction -->
          <button type="button" class="btn btn-danger" (click)="removeSong('cocktail', i)">Remove</button>
        </div>
      </div>
      
      <button type="button" class="btn btn-secondary" (click)="addSong('cocktail', 50)" [disabled]="cocktailSongs.length >= 50">
        Add Cocktail Song
      </button>
    </div>

    <!-- Dinner Songs (up to 50) -->
    <div class="phase-section">
      <h3>Dinner Music</h3>
      <p class="counter">Songs: {{ dinnerSongs.length }}/50</p>
      
      <div formArrayName="dinnerSongs" *ngFor="let song of dinnerSongs.controls; let i = index">
        <div [formGroupName]="i" class="song-entry">
          <!-- Same fields as introduction -->
          <button type="button" class="btn btn-danger" (click)="removeSong('dinner', i)">Remove</button>
        </div>
      </div>

        <button type="submit">{{ isEditing ? 'Update' : 'Add Song' }}</button>
      </div> <!-- End of Dinner Songs phase-section -->
  
    </form>
  </div>
  
    <!-- Saved Songs List -->
  <div *ngIf="savedSongs.length > 0" class="saved-songs">
    <h3>Saved Songs</h3>
    <ul>
      <li *ngFor="let song of savedSongs; let i = index">
        <strong>{{ song.artist }} - {{ song.title }}</strong> (Phase {{ song.phaseId }})
        <button (click)="editSong(i)">Edit</button>
        <button (click)="deleteSong(i)">Delete</button>
      </li>
    </ul>

    <button (click)="saveAllToServer()">Save All to Server</button>
  </div>
